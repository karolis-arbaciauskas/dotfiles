#!/usr/bin/env bash
set -e

KEY_NAME="GitHub SSH Key"
VAULT="Private"

# Check if key exists in 1Password
if ! op item get "$KEY_NAME" --vault "$VAULT" >/dev/null 2>&1; then
  echo "ğŸ” Creating SSH key in 1Password..."
  op item create --category ssh --title "$KEY_NAME" --vault "$VAULT" --ssh-generate-key={{ .sshKeyType }}
  echo "âœ… SSH key created"
else
  echo "âœ… SSH key already exists in 1Password"
fi

# Print public key for GitHub setup
echo ""
echo "ğŸ‘‰ Add this public key to GitHub:"
op item get "$KEY_NAME" --vault "$VAULT" --fields label=public_key
